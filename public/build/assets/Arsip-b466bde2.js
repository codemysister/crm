import{r as t,F as I,W as K,j as e,R as O}from"./app-183ca207.js";import{H as E}from"./HeaderDatatable-497e5508.js";import{S as M}from"./SkeletonDatatable-07c9c4e2.js";import{B as V}from"./badge.esm-c550247d.js";import{B as g}from"./button.esm-d3cd2157.js";import{D as G,C as r}from"./column.esm-1f1d87c0.js";import{C as b,c as h}from"./confirmdialog.esm-3c4cbf5c.js";import{O as W}from"./overlaypanel.esm-9c3ae74e.js";import"./ripple.esm-4b355069.js";import"./inputtext.esm-0c7f541c.js";import"./DashboardLayout-217cf030.js";import"./Dropdown-b69220a2.js";import"./skeleton.esm-b303042b.js";import"./portal.esm-545bb246.js";import"./inputnumber.esm-6c4b14f0.js";import"./dropdown.esm-0caba294.js";import"./index.esm-64ce51d8.js";import"./csstransition.esm-03d4c013.js";import"./inheritsLoose-2f6bfe9f.js";import"./index.esm-9ef49f43.js";import"./index.esm-dca36cda.js";import"./index.esm-80aa95ee.js";import"./dialog.esm-202fdef4.js";const ge=({auth:f,showSuccess:o,showError:i})=>{const[k,x]=t.useState(null),d=t.useRef(null),[p,y]=t.useState(null),[w,c]=t.useState(!1),[N,m]=t.useState(),[j,C]=t.useState(!0),[u,S]=t.useState({global:{value:null,matchMode:I.CONTAINS}}),{put:v,delete:L,reset:P}=K({id:null,uuid:null,name:null,address:null,pic:null,total_members:null}),[D,R]=t.useState(""),A=a=>{const s=a.target.value;let l={...u};l.global.value=s,S(l),R(s)},n=async()=>{c(!0);let s=await(await fetch("/api/leads/arsip")).json();x(l=>s),c(!1)};t.useEffect(()=>{(async()=>{C(s=>!1),await n()})()},[]);const F=()=>e.jsx(E,{globalFilterValue:D,onGlobalFilterChange:A}),_=a=>e.jsx(O.Fragment,{children:e.jsx("i",{className:"pi pi-ellipsis-h pointer cursor-pointer",onClick:s=>{y(a),d.current.toggle(s)}})}),H=()=>{h({message:"Apakah Anda yakin mengembalikan data ini?",header:"Konfirmasi pemulihan",icon:"pi pi-info-circle",acceptClassName:"p-button-success",accept:async()=>{v("leads/"+p.uuid+"/restore",{onSuccess:()=>{n(),o("Hapus")},onError:()=>{i("Hapus")}})}})},T=()=>{h({message:"Apakah Anda yakin untuk menghapus ini?",header:"Konfirmasi hapus",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>{m(!0)}})},B=()=>{L("leads/"+p.uuid+"/force",{onSuccess:()=>{n(),o("Hapus"),P()},onError:()=>{i("Hapus")}})};return j?e.jsx(M,{auth:f}):e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(b,{group:"declarative",visible:N,onHide:()=>m(!1),message:"Konfirmasi kembali jika anda yakin!",header:"Konfirmasi kembali",icon:"pi pi-info-circle",accept:B}),e.jsx(W,{className:"shadow-md p-1 dark:bg-slate-900 dark:text-gray-300",ref:d,children:e.jsxs("div",{className:"flex flex-col flex-wrap w-full",children:[e.jsx(g,{icon:"pi pi-replay",label:"pulihkan",className:"bg-transparent hover:bg-slate-200 w-full text-slate-500 border-b-2 border-slate-400",onClick:()=>{H()}}),e.jsx(g,{icon:"pi pi-trash",label:"hapus",className:"bg-transparent hover:bg-slate-200 w-full text-slate-500 border-b-2 border-slate-400",onClick:()=>{T()}})]})}),e.jsx("div",{className:"flex mx-auto flex-col justify-center mt-5 gap-5",children:e.jsx("div",{className:"card p-fluid w-full h-full flex justify-center rounded-lg",children:e.jsxs(G,{loading:w,className:"w-full h-auto rounded-lg dark:glass border-none text-center shadow-md",pt:{bodyRow:"dark:bg-transparent bg-transparent dark:text-gray-300",table:"dark:bg-transparent bg-white dark:text-gray-300",header:""},paginator:!0,rowsPerPageOptions:[5,10,25,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} - {last} dari {totalRecords}",rows:10,filters:u,emptyMessage:"Lead tidak ditemukan.",paginatorClassName:"dark:bg-transparent paginator-custome dark:text-gray-300 rounded-b-lg",header:F,globalFilterFields:["name","pic","address","total_members","phone_number","created_by.name"],value:k,dataKey:"id",children:[e.jsx(r,{header:"Aksi",body:_,style:{width:"max-content",whiteSpace:"nowrap"},className:"dark:border-none",headerClassName:"dark:border-none  bg-transparent dark:bg-transparent dark:text-gray-300"}),e.jsx(r,{field:"uuid",hidden:!0,className:"dark:border-none",headerClassName:"dark:border-none bg-transparent dark:bg-transparent dark:text-gray-300",header:"Nama",align:"left",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(r,{field:"name",className:"dark:border-none",headerClassName:"dark:border-none bg-transparent dark:bg-transparent dark:text-gray-300",header:"Nama",align:"left",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(r,{field:"status",className:"dark:border-none",headerClassName:"dark:border-none  bg-transparent dark:bg-transparent dark:text-gray-300",align:"left",header:"Status",body:a=>e.jsx(V,{value:a.status.name,className:"text-white",style:{backgroundColor:"#"+a.status.color}}),style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(r,{field:"phone_number",className:"dark:border-none",headerClassName:"dark:border-none bg-transparent dark:bg-transparent dark:text-gray-300",header:"Nomor Telepon",align:"left",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(r,{field:"address",className:"dark:border-none",headerClassName:"dark:border-none bg-transparent dark:bg-transparent dark:text-gray-300",header:"Alamat",align:"left",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(r,{field:"pic",className:"dark:border-none",headerClassName:"dark:border-none bg-transparent dark:bg-transparent dark:text-gray-300",header:"PIC",align:"left",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(r,{field:"created_by",className:"dark:border-none",headerClassName:"dark:border-none bg-transparent dark:bg-transparent dark:text-gray-300",header:"Diinput Oleh",align:"left",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.created_by.name})]})})})]})};export{ge as default};
