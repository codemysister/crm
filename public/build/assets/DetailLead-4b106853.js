import{r as i,W as K,j as e}from"./app-183ca207.js";import{D as j}from"./dropdown.esm-0caba294.js";import{B as U}from"./badge.esm-c550247d.js";import{M as q}from"./menu.esm-1df6c872.js";import{C as H}from"./card.esm-aad9a2fd.js";import{B as u}from"./button.esm-d3cd2157.js";import{D as f}from"./dialog.esm-202fdef4.js";import{I as o}from"./inputtext.esm-0c7f541c.js";import{I as g}from"./inputtextarea.esm-555f4aba.js";import{P as J}from"./progressspinner.esm-5c964cda.js";import{I as n}from"./InputError-6be719bf.js";import O from"./DetailStatusLog-fd6ffc07.js";import W from"./DetailLog-70171b9e.js";import"./ripple.esm-4b355069.js";import"./index.esm-64ce51d8.js";import"./csstransition.esm-03d4c013.js";import"./inheritsLoose-2f6bfe9f.js";import"./portal.esm-545bb246.js";import"./HeaderDatatable-497e5508.js";import"./column.esm-1f1d87c0.js";import"./inputnumber.esm-6c4b14f0.js";import"./index.esm-9ef49f43.js";import"./index.esm-dca36cda.js";import"./index.esm-80aa95ee.js";import"./overlaypanel.esm-9c3ae74e.js";import"./formatDate-5c964a42.js";import"./message.esm-4bbe4c64.js";import"./index.esm-c27cbd20.js";const R=({leads:w,auth:v,DetailLead:c,handleSelectedDetailLead:m,status:N,showSuccess:k,showError:y,isLoading:_,permissionErrorIsVisible:z,setPermissionErrorIsVisible:C})=>{const[t,I]=i.useState(c),[r,x]=i.useState("lembaga"),[S,p]=i.useState(!1),[E,b]=i.useState(!1),{roles:G,permissions:Q,data:F}=v.user;i.useEffect(()=>{I(s=>c)},[c]);const{data:a,setData:l,post:X,put:L,delete:Y,reset:Z,processing:D,errors:d,clearErrors:M}=K({uuid:"",name:null,address:null,pic:null,total_members:null,status:null,note_status:null});let T=[{label:"Lembaga",className:`${r=="lembaga"?"p-menuitem-active":""}`,command:()=>{x(s=>"lembaga")}},{label:"Log",className:`${r=="log"?"p-menuitem-active":""}`,command:()=>{x(s=>"log")}},{label:"Status Log",className:`${r=="status log"?"p-menuitem-active":""}`,command:()=>{x(s=>"status log")}}];const P=(s,h)=>s?e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:s.name})}):e.jsx("span",{children:h.placeholder}),B=s=>e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:s.name})}),V=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row w-full gap-5 items-center ",children:[e.jsx(j,{id:"dropdown-detail",optionLabel:"name",dataKey:"id",value:t,onChange:s=>m(s.target.value),options:w,placeholder:"Pilih lead",filter:!0,valueTemplate:P,itemTemplate:B,style:{color:"#CBD5E1"},className:"w-full md:min-w-[28%] md:w-[28%] md:max-w-[28%] flex justify-center rounded-lg shadow-md border-none dark:text-slate-300 dark:bg-slate-700"}),e.jsx("div",{className:"text-center w-full flex items-center gap-2 justify-center",children:e.jsx("h1",{className:"dark:text-white",children:t==null?void 0:t.name})})]})}),A=s=>{l({...a,uuid:s.uuid,name:s.name,pic:s.pic,phone_number:s.phone_number,address:s.address,total_members:s.total_members,status:s.status}),M(),b(!0)},$=s=>{s.preventDefault(),L("/leads/"+a.uuid,{onSuccess:()=>{k("Update"),b(h=>!1),m(a)},onError:()=>{y("Update")}})};return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:V,className:"mt-5 mx-auto p-3 rounded-lg",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-5 min-h-[300px]",children:[e.jsx("div",{className:"w-full lg:w-[40%]",children:e.jsx(q,{model:T,className:"w-full rounded-lg dark:text-slate-300 dark:bg-slate-700"})}),e.jsx("div",{class:"w-full rounded-lg bg-gray-50/50 border dark:border-none dark:text-slate-300 dark:bg-slate-700 overflow-y-auto min-h-[300px] max-h-[300px] h-full  p-4",children:t?e.jsx(e.Fragment,{children:_?e.jsx("div",{class:"w-full h-full min-h-[300px] flex items-center justify-center",children:e.jsx(J,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s"})}):e.jsxs(e.Fragment,{children:[r==="lembaga"&&e.jsxs("table",{class:"w-full",children:[e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Nama"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:t.name})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Status"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:e.jsx(U,{value:t.status.name,className:"text-white",style:{backgroundColor:"#"+t.status.color}})})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Nomor Telepon"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:t.phone_number?t.phone_number:"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Alamat"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:t.address?t.address:"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Jumlah Member"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:t.total_members?t.total_members:"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Diinput Oleh"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:t.created_by.name?t.created_by.name:"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Aksi"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:e.jsx(u,{label:"edit",className:"p-0 underline bg-transparent text-blue-700 text-left",onClick:()=>{t.created_by.id==F.id?A(t):C(!0)}})})]})]}),r==="log"&&e.jsx(W,{lead:t,handleSelectedDetailLead:m}),r==="status log"&&e.jsx(O,{lead:t,handleSelectedDetailLead:m})]})}):e.jsx("div",{class:"w-full h-full min-h-[300px] flex items-center justify-center",children:e.jsx("p",{class:"text-center",children:"Pilih lead terlebih dahulu"})})})]})}),e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(f,{header:"Lead",headerClassName:"dark:bg-slate-900 dark:text-white",className:"bg-white min-h-[500px] max-h-[80%] w-[80%] md:w-[60%] lg:w-[30%] dark:glass dark:text-white",contentClassName:"dark:bg-slate-900 dark:text-white",visible:E,onHide:()=>b(!1),children:e.jsxs("form",{onSubmit:s=>$(s),children:[e.jsxs("div",{className:"flex flex-col justify-around gap-4 mt-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"name",children:"Nama *"}),e.jsx(o,{value:a.name,onChange:s=>l("name",s.target.value),className:"dark:bg-gray-300",id:"name",required:!0,"aria-describedby":"name-help"}),e.jsx(n,{message:d.name,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"pic",children:"PIC *"}),e.jsx(o,{value:a.pic,onChange:s=>l("pic",s.target.value),className:"dark:bg-gray-300",id:"pic",required:!0,"aria-describedby":"pic-help"}),e.jsx(n,{message:d.pic,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"phone_number",children:"Nomor Telepon"}),e.jsx(o,{keyfilter:"int",value:a.phone_number,onChange:s=>l("phone_number",s.target.value),className:"dark:bg-gray-300",id:"phone_number","aria-describedby":"phone_number-help"}),e.jsx(n,{message:d.phone_number,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"address",children:"Alamat"}),e.jsx(g,{value:a.address,onChange:s=>l("address",s.target.value),rows:5,cols:30})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"total_members",children:"Jumlah Member"}),e.jsx(o,{keyfilter:"int",value:a.total_members,onChange:s=>l("total_members",s.target.value),className:"dark:bg-gray-300",id:"total_members","aria-describedby":"total_members-help"}),e.jsx(n,{message:d.total_members,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"status",children:"Status *"}),e.jsx(j,{value:a.status,onChange:s=>{l("status",s.target.value),p(!0)},dataKey:"name",options:N,optionLabel:"name",placeholder:"Pilih Status",className:"w-full md:w-14rem"}),e.jsx(n,{message:d.status,className:"mt-2"})]})]}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx(u,{label:"Submit",disabled:D,className:"bg-purple-600 text-sm shadow-md rounded-lg"})})]})})}),e.jsx(f,{header:"Edit status",headerClassName:"dark:bg-slate-900 dark:text-white",className:"bg-white h-[250px] max-h-[80%] w-[80%] md:w-[60%] lg:w-[35%] dark:glass dark:text-white",contentClassName:"dark:bg-slate-900 dark:text-white",visible:S,modal:!1,closable:!1,onHide:()=>p(!1),children:e.jsxs("div",{className:"flex flex-col justify-around gap-4 mt-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"note_status",children:"Keterangan"}),e.jsx(g,{value:a.note_status,onChange:s=>l("note_status",s.target.value),rows:5,cols:30})]}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx(u,{type:"button",label:"oke",disabled:a.note_status==null||a.note_status=="",onClick:()=>p(!1),className:"bg-purple-600 text-sm shadow-md rounded-lg"})})]})})]})},Se=R;export{Se as default};
