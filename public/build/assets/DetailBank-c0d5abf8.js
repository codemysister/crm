import{r as u,W as U,j as e}from"./app-183ca207.js";import{I as c}from"./InputError-6be719bf.js";import{L as H}from"./LogDetailPartnerComponent-fcf62a60.js";import{B as d}from"./button.esm-d3cd2157.js";import{D as x}from"./dialog.esm-202fdef4.js";import{D as L}from"./dropdown.esm-0caba294.js";import{I as i}from"./inputtext.esm-0c7f541c.js";import"./HeaderDatatable-497e5508.js";import"./ripple.esm-4b355069.js";import"./SkeletonDatatable-07c9c4e2.js";import"./DashboardLayout-217cf030.js";import"./Dropdown-b69220a2.js";import"./column.esm-1f1d87c0.js";import"./inputnumber.esm-6c4b14f0.js";import"./index.esm-9ef49f43.js";import"./index.esm-dca36cda.js";import"./index.esm-64ce51d8.js";import"./csstransition.esm-03d4c013.js";import"./inheritsLoose-2f6bfe9f.js";import"./index.esm-80aa95ee.js";import"./portal.esm-545bb246.js";import"./skeleton.esm-b303042b.js";import"./formatDate-5c964a42.js";import"./badge.esm-c550247d.js";import"./message.esm-4bbe4c64.js";import"./index.esm-c27cbd20.js";import"./overlaypanel.esm-9c3ae74e.js";const ke=({partner:t,partners:p,handleSelectedDetailPartner:k,showSuccess:h,showError:j,permissions:g,currentUser:_,permissionErrorIsVisible:K,setPermissionErrorIsVisible:f})=>{var I,F,D;const[T,o]=u.useState(!1),[S,m]=u.useState(!1),[N,v]=u.useState(!1),{data:s,setData:n,post:E,put:V,delete:M,reset:b,processing:w,errors:r}=U({uuid:"",partner:{},bank:"",account_bank_number:"",account_bank_name:""}),A=a=>{n(l=>({...l,uuid:a.uuid,partner:t,bank:a.bank,account_bank_number:a.account_bank_number,account_bank_name:a.account_bank_name})),m(!0)},B=(a,l)=>{a.preventDefault(),l!="update"?E("/banks/"+s.uuid,{onSuccess:()=>{h("Update"),o(P=>!1),k(s.partner),b()},onError:()=>{j("Update")}}):V("/banks/"+s.uuid,{onSuccess:()=>{h("Update"),m(P=>!1),k(s.partner),b("partner","bank","account_bank_number","account_bank_name")},onError:()=>{j("Update")}})},R=a=>{let l;return a=="bank"?l="Bank":a=="account_bank_name"?l="Atas Nama":a=="account_bank_number"&&(l="Nomor Rekening"),l},y=(a,l)=>a?e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:a.name})}):e.jsx("span",{children:l.placeholder}),C=a=>e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:a.name})});return e.jsxs(e.Fragment,{children:[t.bank!==null?e.jsx(e.Fragment,{children:e.jsxs("table",{class:"w-full dark:text-slate-300 dark:bg-slate-700",children:[e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Bank"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:((I=t.bank)==null?void 0:I.bank)??"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"No. Rekening"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:((F=t.bank)==null?void 0:F.account_bank_number)??"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Atas Nama"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:((D=t.bank)==null?void 0:D.account_bank_name)??"-"})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Log"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:e.jsx(d,{onClick:()=>{v(!0)},className:"bg-transparent p-0 cursor-pointer text-blue-700 underline ",children:"logs"})})]}),e.jsxs("tr",{class:"border-b",children:[e.jsx("td",{class:"pt-2 pb-1  text-base font-bold w-1/5",children:"Aksi"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-[2%]",children:":"}),e.jsx("td",{class:"pt-2 pb-1  text-base w-7/12",children:e.jsx(d,{label:"edit",className:"p-0 underline bg-transparent text-blue-700 text-left",onClick:()=>{g.includes("tambah bank partner")&&t.account_manager_id==_.id?A(t.bank):f(a=>!0)}})})]})]})}):e.jsx("div",{class:"w-full h-full min-h-[300px] -mt-4 flex items-center justify-center",children:e.jsxs("p",{class:"text-center",children:["Tidak ada data bank,"," ",e.jsx(d,{onClick:()=>{g.includes("tambah bank partner")&&t.account_manager_id==_.id?(b(),n("partner",t),o(!0)):f(a=>!0)},className:"bg-transparent p-0 cursor-pointer text-blue-700 underline ",children:"tambah bank"})]})}),e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(x,{header:"Bank",headerClassName:"dark:glass dark:text-white",className:"bg-white w-[80%] md:w-[60%] lg:w-[35%] dark:glass dark:text-white",contentClassName:"dark:glass dark:text-white",visible:T,onHide:()=>o(!1),children:e.jsxs("form",{onSubmit:a=>B(a,"tambah"),children:[e.jsxs("div",{className:"flex flex-col justify-around gap-4 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"partner_subcription",children:"Partner"}),e.jsx(L,{dataKey:"name",optionLabel:"name",value:s.partner,onChange:a=>n("partner",a.target.value),options:p,placeholder:"Pilih Lembaga",filter:!0,disabled:!0,valueTemplate:y,itemTemplate:C,className:"w-full md:w-14rem"}),e.jsx(c,{message:r.partner,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"bank",children:"Bank"}),e.jsx(i,{value:s.bank,onChange:a=>n("bank",a.target.value),className:"dark:bg-gray-300",id:"bank","aria-describedby":"bank-help"}),e.jsx(c,{message:r.bank,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"account_bank_number",children:"Nomor Rekening"}),e.jsx(i,{value:s.account_bank_number,onChange:a=>n("account_bank_number",a.target.value),className:"dark:bg-gray-300",id:"account_bank_number","aria-describedby":"account_bank_number-help"}),e.jsx(c,{message:r.account_bank_number,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"account_bank_name",children:"Atas Nama"}),e.jsx(i,{value:s.account_bank_name,onChange:a=>n("account_bank_name",a.target.value),className:"dark:bg-gray-300",id:"account_bank_name","aria-describedby":"account_bank_name-help"}),e.jsx(c,{message:r.account_bank_name,className:"mt-2"})]})]}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx(d,{label:"Submit",disabled:w,className:"bg-purple-600 text-sm shadow-md rounded-lg"})})]})})}),e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(x,{header:"Bank",headerClassName:"dark:glass dark:text-white",className:"bg-white w-[80%] md:w-[60%] lg:w-[35%] dark:glass dark:text-white",contentClassName:"dark:glass dark:text-white",visible:S,onHide:()=>m(!1),children:e.jsxs("form",{onSubmit:a=>B(a,"update"),children:[e.jsxs("div",{className:"flex flex-col justify-around gap-4 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"partner_subcription",children:"Partner"}),e.jsx(L,{dataKey:"name",optionLabel:"name",value:s.partner,onChange:a=>n("partner",a.target.value),options:p,placeholder:"Pilih Partner",filter:!0,valueTemplate:y,itemTemplate:C,className:"w-full md:w-14rem"}),e.jsx(c,{message:r.partner,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"bank",children:"Bank"}),e.jsx(i,{value:s.bank,onChange:a=>n("bank",a.target.value),className:"dark:bg-gray-300",id:"bank","aria-describedby":"bank-help"}),e.jsx(c,{message:r.bank,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"account_bank_number",children:"Nomor Rekening"}),e.jsx(i,{value:s.account_bank_number,onChange:a=>n("account_bank_number",a.target.value),className:"dark:bg-gray-300",id:"account_bank_number","aria-describedby":"account_bank_number-help"}),e.jsx(c,{message:r.account_bank_number,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"account_bank_name",children:"Atas Nama"}),e.jsx(i,{value:s.account_bank_name,onChange:a=>n("account_bank_name",a.target.value),className:"dark:bg-gray-300",id:"account_bank_name","aria-describedby":"account_bank_name-help"}),e.jsx(c,{message:r.account_bank_name,className:"mt-2"})]})]}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx(d,{label:"Submit",disabled:w,className:"bg-purple-600 text-sm shadow-md rounded-lg"})})]})})}),e.jsx(x,{header:"Log Bank",visible:N,maximizable:!0,className:"w-[90vw] lg:w-[50vw]",onHide:()=>{v(!1)},children:N&&e.jsx(H,{selectedData:t.bank,fetchUrl:"/api/banks/{partner:id}/logs",objectKeyToIndo:R})})]})};export{ke as default};
