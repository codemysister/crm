import{r as s,F as fe,W as je,j as e,a as ye,d as be}from"./app-183ca207.js";import{I as d}from"./inputtext.esm-0c7f541c.js";import{C as Ne}from"./card.esm-aad9a2fd.js";import{B as b}from"./button.esm-d3cd2157.js";import{D as ve,C as N}from"./column.esm-1f1d87c0.js";import{D as we}from"./dialog.esm-202fdef4.js";import{C as I}from"./calendar.esm-fe4692a5.js";import{D as L}from"./dropdown.esm-0caba294.js";import{T as ke}from"./toast.esm-b97f2233.js";import{D as Se}from"./DialogInstitution-405a9aff.js";import{g as E,a as Fe}from"./getProvince-aa058a1f.js";import{B as De,L as Te}from"./blockui.esm-74c21695.js";import{I as Ce}from"./InputError-6be719bf.js";import{u as B}from"./UppercaseEachWord-e9d7052e.js";import"./ripple.esm-4b355069.js";import"./portal.esm-545bb246.js";import"./inputnumber.esm-6c4b14f0.js";import"./index.esm-9ef49f43.js";import"./index.esm-dca36cda.js";import"./index.esm-64ce51d8.js";import"./csstransition.esm-03d4c013.js";import"./inheritsLoose-2f6bfe9f.js";import"./index.esm-80aa95ee.js";import"./index.esm-d51fec0e.js";import"./index.esm-c27cbd20.js";import"./assertThisInitialized-081f9914.js";import"./formatNPWP-cf5b7efc.js";import"./badge.esm-c550247d.js";import"./HeaderDatatable-497e5508.js";import"./progressspinner.esm-5c964cda.js";const ha=({usersDefault:O,partnersDefault:_,signaturesProp:J})=>{var A,P;const[M,Re]=s.useState(O),[V,H]=s.useState(_);s.useState(J);const[U,p]=s.useState(!1),[z,Ke]=s.useState(!0),g=s.useRef(null),[G,$]=s.useState([]),[W,Y]=s.useState([]),[Z,v]=s.useState(!1),[X,q]=s.useState(!1),[Q,ee]=s.useState(null),[c,w]=s.useState(null),[ae,Ae]=s.useState(null),[te,k]=s.useState(!1),[S,Pe]=s.useState(localStorage.theme);s.useEffect(()=>{S?localStorage.theme="dark":localStorage.removeItem("theme"),localStorage.theme==="dark"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]);const F=s.useRef(null);s.useRef(null);const m=s.useRef(null),u=s.useRef(null),f=s.useRef(null),j=s.useRef(null),h=s.useRef(null),x=s.useRef(null),[y,D]=s.useState({global:{value:null,matchMode:fe.CONTAINS}}),[se,re]=s.useState(""),le=a=>{const r=a.target.value;let i={...y};i.global.value=r,D(i),re(r)},l=a=>(a.current&&(a.current.classList.add("twinkle"),a.current.focus()),null),o=a=>(a.current.classList.remove("twinkle"),null);document.querySelector("body").classList.add("overflow-hidden");const{data:t,setData:n,post:ne,put:Ie,delete:Le,reset:ie,processing:T,errors:oe}=je({uuid:"",code:`${Math.floor(Math.random()*1e3)}/CAZH-SPJ/X/${new Date().getFullYear()}`,employees:[],partner:{name:null,province:null,regency:null},departure_date:new Date,return_date:new Date,transportation:"",accommodation:"",signature:{name:"Muh Arif Mahmudin",position:"CEO",image:"/assets/img/signatures/ttd.png"},stpd_doc:""});s.useEffect(()=>{k(!!T)},[T]),s.useEffect(()=>{(async()=>{let r=await Fe();$(i=>r)})()},[]),s.useEffect(()=>{(async()=>{if(c){let r=await E(c);Y(i=>r)}})()},[c,ae]),s.useEffect(()=>{c&&E(c)},[c]);const ce=()=>e.jsx(b,{label:"OK",icon:"pi pi-check",onClick:()=>p(!1)}),C=a=>{if(!a)return"N/A";let r=a.getDate(),i=a.getMonth()+1,xe=a.getFullYear(),pe=i<10?"0"+i:i,ge=xe;return r+"/"+pe+"/"+ge},R=(a,r)=>a?e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:a.name})}):e.jsx("span",{children:r.placeholder}),K=a=>e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:a.name})}),de=e.jsx("div",{className:"flex flex-row justify-left gap-2 align-items-center items-end",children:e.jsx("div",{className:"w-[30%]",children:e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search dark:text-white"}),e.jsx(d,{className:"dark:bg-transparent dark:placeholder-white",value:se,onChange:le,placeholder:"Keyword Search"})]})})}),me=a=>{g.current.show({severity:"success",summary:"Success",detail:`${a} data berhasil`,life:3e3})},ue=a=>{g.current.show({severity:"error",summary:"Error",detail:`${a} data gagal`,life:3e3})},he=a=>{a.preventDefault(),ne("/stpd",{onSuccess:()=>{me("Tambah"),window.location="/stpd"},onError:()=>{ue("Tambah")}})};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{title:"Surat Keterangan Perjalanan Dinas"}),e.jsx(ke,{ref:g}),e.jsx(De,{blocked:te,template:Te,children:e.jsx("div",{className:"h-screen max-h-screen overflow-y-hidden",children:e.jsxs("div",{className:"flex flex-col h-screen max-h-screen overflow-hidden md:flex-row z-40 relative gap-5",children:[e.jsx("div",{className:"md:w-[35%] overflow-y-auto h-screen max-h-screen p-5",children:e.jsxs(Ne,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"font-bold text-xl",children:"Surat Keterangan Perjalanan Dinas"}),e.jsx(be,{href:"/stpd",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(b,{label:"Tambah karyawan",icon:"pi pi-external-link",onClick:()=>p(!0)}),e.jsx("div",{className:"flex flex-col mt-3",children:e.jsx(d,{value:t.code,onChange:a=>n("code",a.target.value),className:"dark:bg-gray-300",id:"code","aria-describedby":"code-help",hidden:!0})}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"lembaga",children:"Lembaga *"}),e.jsx(d,{value:t.partner.name,onFocus:()=>{l(F)},onBlur:()=>{o(F)},onClick:()=>{v(!0)},placeholder:"Pilih lembaga",className:"dark:bg-gray-300 cursor-pointer",id:"partner","aria-describedby":"partner-help"}),e.jsx(Ce,{message:oe["partner.name"],className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"province",children:"Provinsi *"}),e.jsx(L,{value:t.partner.province?JSON.parse(t.partner.province):null,onChange:a=>{w(r=>a.target.value.code),n("partner",{...t.partner,province:JSON.stringify(a.target.value)})},dataKey:"code",options:G,optionLabel:"name",placeholder:"Pilih Provinsi",filter:!0,valueTemplate:R,itemTemplate:K,className:"w-full md:w-14rem",onFocus:()=>{l(h)},onShow:()=>{l(h)},onBlur:()=>{o(h)}})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"regency",children:"Kabupaten *"}),e.jsx(L,{dataKey:"code",value:t.partner.regency?JSON.parse(t.partner.regency):null,onChange:a=>{n("partner",{...t.partner,regency:JSON.stringify(a.target.value)})},onFocus:()=>{l(x)},onShow:()=>{l(x)},onBlur:()=>{o(x)},options:W,optionLabel:"name",placeholder:"Pilih Kabupaten",filter:!0,valueTemplate:R,itemTemplate:K,className:"w-full md:w-14rem"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"register_date",children:"Tanggal Berangkat *"}),e.jsx(I,{value:t.departure_date?new Date(t.departure_date):null,style:{height:"35px"},onChange:a=>{new Date(a.target.value).toISOString().split("T")[0],n("departure_date",a.target.value)},onFocus:()=>{l(m)},onShow:()=>{l(m)},onHide:()=>{o(m)},showIcon:!0,dateFormat:"dd/mm/yy"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"register_date",children:"Tanggal Kembali *"}),e.jsx(I,{value:t.return_date?new Date(t.return_date):null,style:{height:"35px"},onChange:a=>{new Date(a.target.value).toISOString().split("T")[0],n("return_date",a.target.value)},onFocus:()=>{l(u)},onShow:()=>{l(u)},onHide:()=>{o(u)},showIcon:!0,dateFormat:"dd/mm/yy"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"transportation",children:"Kendaraan *"}),e.jsx(d,{value:t.transportation,onChange:a=>n("transportation",a.target.value),onFocus:()=>{l(f)},onBlur:()=>{o(f)},className:"dark:bg-gray-300",id:"transportation","aria-describedby":"transportation-help"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"accomodation",children:"Akomodasi *"}),e.jsx(d,{value:t.accommodation,onChange:a=>n("accommodation",a.target.value),onFocus:()=>{l(j)},onBlur:()=>{o(j)},className:"dark:bg-gray-300",id:"accommodation","aria-describedby":"accommodation-help"})]}),e.jsx("div",{className:"flex-flex-col mt-3",children:e.jsx("form",{onSubmit:he,children:e.jsx(b,{className:"mx-auto justify-center block",children:"Submit"})})})]})]})}),e.jsx(we,{header:"Karyawan",visible:U,style:{width:"75vw"},maximizable:!0,modal:!0,contentStyle:{height:"550px"},onHide:()=>p(!1),footer:ce,children:e.jsxs(ve,{value:M,paginator:!0,filters:y,rows:5,header:de,scrollable:!0,scrollHeight:"flex",tableStyle:{minWidth:"50rem"},selectionMode:z?null:"checkbox",selection:t.employees,onSelectionChange:a=>{n("employees",a.value)},dataKey:"id",children:[e.jsx(N,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(N,{field:"name",header:"Name"}),e.jsx(N,{filter:!0,body:a=>e.jsx("span",{children:a.position}),header:"Jabatan",field:"position"})]})}),e.jsxs("div",{className:"md:w-[65%] hidden md:block h-screen text-sm max-h-screen overflow-y-auto p-5",children:[e.jsx("header",{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx("img",{src:"/assets/img/cazh.png",alt:"",className:"float-left w-1/3 h-1/3"})}),e.jsxs("div",{className:"w-full text-right text-xs",children:[e.jsx("h2",{className:"font-bold",children:"PT CAZH TEKNOLOGI INOVASI"}),e.jsx("p",{children:"Bonavida Park D1, Jl. Raya Karanggintung"}),e.jsx("p",{children:"Kec. Sumbang, Kab. Banyumas,Jawa Tengah 53183"}),e.jsx("p",{children:"hello@cards.co.id | https://cards.co.id"})]})]})}),e.jsxs("div",{className:"text-center mt-5",children:[e.jsx("h1",{className:"font-bold underline mx-auto",children:"SURAT TUGAS PERJALANAN DINAS"}),e.jsx("p",{className:"",children:"Nomor : 001/CAZH-SPJ/X/2023"})]}),e.jsx("div",{className:"w-full mt-5",children:e.jsxs("table",{className:"w-full",children:[e.jsxs("thead",{className:"bg-blue-100  dark:text-gray-600 text-left",children:[e.jsx("th",{className:"px-2 py-1",children:"No"}),e.jsx("th",{className:"px-2 py-1",children:"Nama Karyawan"}),e.jsx("th",{className:"px-2 py-1",children:"Jabatan"})]}),e.jsxs("tbody",{children:[((A=t.employees)==null?void 0:A.length)==0&&e.jsx("tr",{className:"text-center",children:e.jsx("td",{colSpan:3,children:"Karyawan belum ditambah"})}),(P=t.employees)==null?void 0:P.map((a,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-1",children:++r}),e.jsx("td",{className:"px-2 py-1",children:a.name}),e.jsx("td",{className:"px-2 py-1",children:a.position})]},a.name+r))]})]})}),e.jsx("p",{className:"mt-10",children:"Untuk melaksanakan tugas melakukan perjalanan dinas dengan ketentuan sebagai berikut:"}),e.jsx("div",{className:"w-full mt-5",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-1/6",children:"Lembaga Tujuan"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-[1%]",children:":"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 font-bold w-7/12",children:t.partner.name??"{{Lembaga}}"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-1/6",children:"Lokasi"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-[1%]",children:":"}),e.jsxs("td",{className:"text-gray-700 dark:text-gray-300 font-bold w-7/12",children:[e.jsx("span",{ref:x,children:t.partner.regency?B(JSON.parse(t.partner.regency).name):"{{Kab/Kota}}"}),", ",e.jsx("span",{ref:h,children:t.partner.province?B(JSON.parse(t.partner.province).name):"{{Provinsi}}"})]})]}),e.jsx("br",{}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-1/6",children:"Berangkat"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-[1%]",children:":"}),e.jsx("td",{ref:m,className:"text-gray-700 dark:text-gray-300 font-bold w-7/12",children:C(t.departure_date)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-1/6",children:"Kembali"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-[1%]",children:":"}),e.jsx("td",{ref:u,className:"text-gray-700 dark:text-gray-300 font-bold w-7/12",children:C(t.return_date)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-1/6",children:"Kendaraan"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-[1%]",children:":"}),e.jsx("td",{ref:f,className:"text-gray-700 dark:text-gray-300 font-bold w-7/12",children:t.transportation??"{{Kendaraan}}"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-1/6",children:"Akomodasi"}),e.jsx("td",{className:"text-gray-700 dark:text-gray-300 w-[1%]",children:":"}),e.jsx("td",{ref:j,className:"text-gray-700 dark:text-gray-300 font-bold w-7/12",children:t.accommodation??"{{Akomodasi}}"})]})]})})}),e.jsx("div",{className:"w-full mt-5 text-justify",children:"Semua biaya dalam perjalanan dinas, konsumsi, serta akomodasi dalam rangka perjalanan dinas ini akan menjadi tanggung jawab PT Cazh Teknologi Inovasi sesuai peraturan perjalanan dinas yang berlaku."}),e.jsx("div",{className:"w-full mt-5 text-justify",children:"Demikian surat ini dibuat agar dapat dilaksanakan dengan baik dan penuh tanggung jawab. Kepada semua pihak yang terlibat dimohon kerja sama yang baik agar perjalanan dinas ini dapat terlaksana dengan lancar."}),e.jsxs("div",{className:"flex flex-col mt-5 justify-start w-[30%]",children:[e.jsxs("p",{children:["Purwokerto, ",new Date().getFullYear()]}),e.jsx("div",{className:"h-[100px] w-[170px] py-2",children:e.jsx("img",{src:t.signature.image,alt:"",className:"w-full h-full object-fill"})}),e.jsx("p",{children:t.signature.name}),e.jsx("p",{children:t.signature.position})]})]})]})})}),e.jsx(Se,{dialogInstitutionVisible:Z,setDialogInstitutionVisible:v,filters:y,setFilters:D,isLoadingData:X,setIsLoadingData:q,leads:Q,setLeads:ee,partners:V,setPartners:H,data:t,setData:n,setProvinceName:w,reset:ie})]})};export{ha as default};
