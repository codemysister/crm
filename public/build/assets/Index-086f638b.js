import{r as l,F as Ze,W as ae,j as e,y as ea,d as aa,R as te,_ as re}from"./app-183ca207.js";import{D as U,C as i}from"./column.esm-1f1d87c0.js";import{T as ta}from"./toast.esm-b97f2233.js";import{B as c}from"./button.esm-d3cd2157.js";import{D as ra}from"./DashboardLayout-217cf030.js";import{H as na}from"./HeaderModule-b06ca799.js";import{I as N}from"./inputtext.esm-0c7f541c.js";import{C as ne,c as le}from"./confirmdialog.esm-3c4cbf5c.js";import{D as se}from"./dialog.esm-202fdef4.js";import{O as oe}from"./overlaypanel.esm-9c3ae74e.js";import{P as la}from"./progressspinner.esm-5c964cda.js";import{B as sa}from"./badge.esm-c550247d.js";import{I as ie}from"./inputnumber.esm-6c4b14f0.js";import{C}from"./calendar.esm-fe4692a5.js";import{D as g}from"./dropdown.esm-0caba294.js";import{C as oa}from"./confirmpopup.esm-04dc2a7b.js";import{H as ia}from"./HeaderDatatable-497e5508.js";import{S as da}from"./SkeletonDatatable-07c9c4e2.js";import{S as ca}from"./sidebar.esm-1f854c9b.js";import{T as ma,a as B}from"./tabview.esm-5482a716.js";import{f as T}from"./formatDate-5c964a42.js";import{g as pa}from"./getViewportSize-e6da2c0c.js";import{f as ua}from"./formatNPWP-cf5b7efc.js";import{h as ha}from"./handleSelectedDetailInstitution-5c7c27d9.js";import{L as fa,A as xa}from"./ArsipComponent-6d496fd7.js";import{B as ga,L as ba}from"./blockui.esm-74c21695.js";import{F,r as ya,p as wa}from"./filepond.min-8386e795.js";import"./ripple.esm-4b355069.js";import"./index.esm-9ef49f43.js";import"./index.esm-dca36cda.js";import"./index.esm-64ce51d8.js";import"./csstransition.esm-03d4c013.js";import"./inheritsLoose-2f6bfe9f.js";import"./index.esm-80aa95ee.js";import"./portal.esm-545bb246.js";import"./index.esm-c27cbd20.js";import"./assertThisInitialized-081f9914.js";import"./Dropdown-b69220a2.js";import"./index.esm-d51fec0e.js";import"./skeleton.esm-b303042b.js";import"./message.esm-4bbe4c64.js";import"./PermissionErrorDialog-eff24ba6.js";ya(wa);function xt({auth:k,invoiceGeneralProps:de,usersProp:ce,partnersProp:me,signaturesProp:pe,statusProp:ue}){const[K,M]=l.useState(de),[A,ka]=l.useState(me),[P,ja]=l.useState(ce),[he,_a]=l.useState(ue);l.useState(pe);const p=pa().width<992,[fe,xe]=l.useState([]),[ge,b]=l.useState(!1),[be,S]=l.useState(!1),[ye,D]=l.useState(!1),[we,O]=l.useState(!1),[ke,V]=l.useState(null),[X,je]=l.useState(null),[y,_e]=l.useState(0),H=l.useRef(null),G=l.useRef(null),q=l.useRef(null),[ve,I]=l.useState(null),L=l.useRef(null),[Ne,$]=l.useState(!0),[Se,j]=l.useState(!1),E=l.useRef(null),{roles:Na,permissions:w}=k.user,[Ce,Te]=l.useState(null);l.useState(!1);const[W,Fe]=l.useState({global:{value:null,matchMode:Ze.CONTAINS}}),{data:m,setData:_,reset:Pe}=ae({user:null,input_date:{start:null,end:null},payment_metode:null});l.useEffect(()=>{y==0&&De(u)},[y]);const De=async a=>{try{await Promise.all([a()]),b(!1),$(t=>t=!1)}catch(t){console.error("Error fetching data:",t)}},{data:r,setData:s,post:Sa,put:Ca,delete:Ie,reset:v,processing:Le,errors:J}=ae({id:"",invoice_general:null,partner:{id:null,name:null},signature:{name:null,image:null},date:null,nominal:null,money:null,payment_for:null,proof_of_transaction:null,metode:null}),u=async()=>{b(!0);let t=await(await fetch("/api/invoice_generals")).json();M(o=>t),b(!1)};l.useEffect(()=>{(async()=>{try{await Promise.all([u()]),b(!1),$(t=>t=!1)}catch(t){console.error("Error fetching data:",t)}})()},[]);const Y=async a=>{const t={method:"GET",url:`/api/convert/rupiah?nominal=${a}`,headers:{"Content-Type":"application/json"}};try{const n=(await axios.request(t)).data;s(d=>({...d,nominal:a,money:n}))}catch(o){console.log(o)}},Ee=a=>e.jsxs(te.Fragment,{children:[w.includes("edit transaksi")&&e.jsx(c,{icon:"pi pi-pencil",rounded:!0,outlined:!0,className:"mr-2",onClick:()=>{D(!0),ze(a)}}),w.includes("hapus transaksi")&&e.jsx(c,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>{Be(a)}})]}),Re=a=>e.jsx(te.Fragment,{children:e.jsx("i",{className:"pi pi-ellipsis-h pointer cursor-pointer",onClick:t=>{je(a),G.current.toggle(t)}})}),h=a=>{E.current.show({severity:"success",summary:"Success",detail:`${a} data berhasil`,life:3e3})},f=a=>{E.current.show({severity:"error",summary:"Error",detail:a,life:3e3})},ze=a=>{s({...r,uuid:a.uuid,invoice_general_id:a.invoice_general_id,partner:{id:a.partner_id,name:a.partner_name},date:a.date,nominal:a.nominal,money:a.money,metode:a.metode,payment_for:a.payment_for,proof_of_transaction:a.proof_of_transaction,signature:{name:a.signature_name,image:a.signature_image}})},Ue=()=>{Ie("invoice_generals/"+X.uuid,{onSuccess:()=>{u(),h("Hapus")},onError:()=>{f("Hapus")}})},Be=a=>{le({message:"Apakah Anda yakin untuk menghapus ini?",header:"Konfirmasi hapus",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:async()=>{axios.delete("invoice_generals/transaction/"+a.uuid,{headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content}}).then(t=>{t.data.error?f(t.data.error):(h("Tambah"),S(o=>!1),u(),v("nominal","date","money","payment_for","metode","signature"),s(o=>({...o,rest_bill:t.data.rest_of_bill})))})}})},Ke=()=>{const a=K.map(t=>({Kode:t.code??"-",Lembaga:t.partner?t.partner.name:"-",NPWP:t.partner?t.partner.npwp:"-",Link_Dokumen:{v:window.location.origin+"/"+t.invoice_general_doc,h:"link",l:{Target:window.location.origin+"/storage/"+t.invoice_general_doc,Tooltip:"Klik untuk membuka dokumen"}},Tanggal_Pembuatan:T(t.created_at)}));re(()=>import("./xlsx-6ed613d4.js"),[]).then(t=>{const n={Sheets:{data:t.utils.json_to_sheet(a)},SheetNames:["data"]},d=t.write(n,{bookType:"xlsx",type:"array"});Me(d,"invoice_umum")})},Me=(a,t)=>{re(()=>import("./FileSaver.min-a64440ff.js").then(o=>o.F),["assets/FileSaver.min-a64440ff.js","assets/app-183ca207.js","assets/app-22bdcf69.css"]).then(o=>{if(o&&o.default){let n="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",d=".xlsx";const x=new Blob([a],{type:n});o.default.saveAs(x,t+d)}})},Ae=()=>e.jsxs(ia,{filters:W,setFilters:Fe,children:[e.jsx(c,{className:"shadow-md w-[10px] lg:w-[90px] border border-slate-600 bg-transparent text-slate-600 dark:bg-slate-700 dark:text-slate-300 rounded-lg",onClick:()=>I(!0),children:e.jsxs("span",{className:"w-full flex justify-center items-center gap-1",children:[e.jsx("i",{className:"pi pi-filter",style:{fontSize:"0.7rem"}})," ",!p&&e.jsx("span",{children:"filter"})]})}),e.jsx(c,{className:"shadow-md w-[10px] lg:w-[90px] bg-transparent text-slate-600 dark:bg-slate-700 dark:text-slate-300 dark:border rounded-lg",onClick:Ke,"data-pr-tooltip":"XLS",children:e.jsxs("span",{className:"w-full flex items-center justify-center gap-1",children:[e.jsx("i",{className:"pi pi-file-excel",style:{fontSize:"0.8rem"}})," ",!p&&e.jsx("span",{children:"export"})]})})]}),Oe=()=>e.jsx("i",{className:"pi pi-plus",style:{fontSize:"0.7rem",paddingRight:"5px"}}),R=(a,t)=>a?e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:a.name})}):e.jsx("span",{children:t.placeholder}),z=a=>e.jsx("div",{className:"flex align-items-center",children:e.jsx("div",{children:a.name})}),Ve=()=>{le({message:"Apakah Anda yakin untuk menghapus ini?",header:"Konfirmasi hapus",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:()=>{O(!0)}})},Xe=e.jsx("div",{className:"flex flex-row gap-2 bg-gray-50 dark:bg-transparent p-2 rounded-lg align-items-center items-center justify-between justify-content-between",children:e.jsx("div",{className:"w-[30%]",children:w.includes("tambah transaksi")&&e.jsx(c,{label:"Input Pembayaran",className:"bg-purple-600 max-w-[146px] w-full text-xs shadow-md rounded-lg mr-2",icon:Oe,onClick:()=>{S(a=>!0),v("nominal","date","money","payment_for","signature")},"aria-controls":"popup_menu_right","aria-haspopup":!0})})}),He=()=>{const a={xendit_link:ke};L.current.click(),axios.put("invoice_generals/"+r.uuid+"/xendit",a,{headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content}}).then(t=>{t.data.error?f(t.data.error):(h("Update"),u(),V(o=>null),v())})},Ge=a=>(s(a.rowData),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{type:"text",className:"w-[10rem]",value:a.value,onChange:t=>{a.editorCallback(t.target.value),V(t.target.value)},onKeyDown:t=>t.stopPropagation()}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(c,{icon:"pi pi-times",onClick:()=>{L.current.click()},className:"p-0 rounded-full bg-red-500  dark:text-white"}),e.jsx(c,{icon:"pi pi-check",className:"p-0 rounded-full bg-green-500  dark:text-white",onClick:He})]})]})),qe=a=>Ge(a),$e=a=>a.transactions.length>=0,We=a=>{s(t=>({...t,invoice_general:a.data.uuid,partner:{...t.partner,name:a.data.institution_name,id:a.data.partner.id},rest_bill:a.data.rest_of_bill}))},Je=a=>e.jsx("div",{className:"md:px-14 relative",children:e.jsx("div",{className:"flex",children:e.jsxs(U,{headerClassName:"bg-red-500",value:a.transactions,className:"",header:Xe,emptyMessage:"Transaksi tidak ditemukan.",children:[e.jsx(i,{header:"No",body:(t,{rowIndex:o})=>o+1,className:"dark:border-none",headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(i,{field:"date",header:"Tanggal",style:{width:"max-content",whiteSpace:"nowrap"},body:t=>new Date(t.date).toLocaleDateString("id"),headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"nominal",header:"Nominal",style:{width:"max-content",whiteSpace:"nowrap"},body:t=>t.nominal.toLocaleString("id-ID"),headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"money",header:"Uang Terbilang",style:{width:"max-content",whiteSpace:"nowrap"},headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"metode",header:"Metode",style:{width:"max-content",whiteSpace:"nowrap"},headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"proof_of_transaction",header:"Bukti",style:{width:"max-content",whiteSpace:"nowrap"},headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300",body:t=>e.jsx("div",{className:"w-[100px] h-[100px] bg-no-repeat bg-contain rounded-t-xl",style:{backgroundImage:`url(${t.proof_of_transaction})`,backgroundPosition:"center",backgroundSize:"contain"}})}),e.jsx(i,{field:"created_by",header:"Diinput Oleh",style:{width:"max-content",whiteSpace:"nowrap"},body:t=>t.user.name,headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{body:t=>t.receipt_doc==""?e.jsx(la,{style:{width:"30px",height:"30px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s"}):e.jsx("div",{className:"flex w-full h-full items-center justify-center",children:e.jsx("a",{href:t.receipt_doc,download:`Kwitansi_${t.partner_name}`,class:"font-bold  w-full h-full text-center rounded-full ",children:e.jsx("i",{className:"pi pi-file-pdf",style:{width:"100%",height:"100%",fontSize:"1.5rem"}})})}),className:"dark:border-none",headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300",align:"left",header:"Dokumen",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(i,{header:"Action",body:Ee,style:{width:"max-content",whiteSpace:"nowrap"},className:"dark:border-none",headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"})]})})}),Ye=async a=>{a.preventDefault(),b(!0);const t={user:m.user,input_date:m.input_date,status:m.status},o=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),d=(await axios.post("/invoice_generals/filter",t,{headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o}})).data;M(d),I(!1),b(!1)},Q=(a,t)=>{a.preventDefault(),j(!0);let o={...r};const n=document.querySelector('meta[name="csrf-token"]').getAttribute("content");t==="tambah"?axios.post("/invoice_generals/transaction",o,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":n}}).then(d=>{d.data.error?(f(d.data.error),j(!1)):(j(!1),h("Tambah"),S(x=>!1),u(),v("nominal","date","money","payment_for","metode","proof_of_transaction","signature"),s(x=>({...x,rest_bill:d.data.rest_of_bill})))}):axios.post("/invoice_generals/transaction/"+r.uuid,o,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":n}}).then(d=>{d.data.error?(f(d.data.error),j(!1)):(h("Tambah"),D(x=>!1),j(!1),u(),v("nominal","date","money","payment_for","metode","proof_of_transaction","signature"),s(x=>({...x,rest_bill:d.data.rest_of_bill})))})},Z=[{field:"code",header:"Kode",frozen:!p,style:p?null:{width:"max-content",whiteSpace:"nowrap"}},{header:"Lembaga",frozen:!p,style:{width:"max-content",whiteSpace:"nowrap"},body:a=>e.jsx("button",{onClick:()=>ha(a),className:"hover:text-blue-700 text-left",children:a.institution_name})},{header:"Status",frozen:!p,style:{width:"max-content",whiteSpace:"nowrap"},body:a=>e.jsx(sa,{value:a.status.name,className:"text-white",style:{backgroundColor:"#"+a.status.color}})},{field:"npwp",header:"NPWP",style:p?null:{width:"max-content",whiteSpace:"nowrap"},body:a=>{var t;return a.lead!=null?"-":((t=a.partner)==null?void 0:t.npwp)!==null?ua(a.partner.npwp):"-"}},{field:"invoice_general_doc",header:"Dokumen",style:p?null:{width:"max-content",whiteSpace:"nowrap"},body:a=>e.jsx("div",{className:"flex w-full h-full items-center justify-center",children:e.jsx("a",{href:a.invoice_general_doc,download:`Invoice_General_${a.institution_name}`,class:"font-bold  w-full h-full text-center rounded-full ",children:e.jsx("i",{className:"pi pi-file-pdf",style:{width:"100%",height:"100%",fontSize:"1.5rem"}})})})},{field:"xendit_link",header:"Link Xendit",style:{width:"max-content",whiteSpace:"nowrap"},editor:a=>qe(a)},{field:"date",header:"Tanggal",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>T(a.date)},{field:"due_date",header:"Tanggal Jatuh Tempo",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>T(a.due_date)},{field:"bill_date",header:"Tanggal Pembayaran Terakhir",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.bill_date!==null?T(a.bill_date):"-"},{field:"total",header:"Total",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.total.toLocaleString("id")},{field:"total_all_ppn",header:"Pajak",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.total_all_ppn.toLocaleString("id")},{field:"paid_off",header:"Uang Muka",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.paid_off.toLocaleString("id")},{field:"rest_of_bill",header:"Sisa Tagihan",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.rest_of_bill.toLocaleString("id")},{field:"payment_metode",header:"Metode Pembayaran",style:{width:"max-content",whiteSpace:"nowrap"}}],ee=["partner.name","partner.npwp","code","status.name"],Qe=a=>{let t;const n=a.split(".")[0];return n=="institution_name"?t="Lembaga":n=="institution_npwp"?t="NPWP":n=="date"?t="Tanggal":n=="due_date"?t="Jatuh Tempo":n=="invoice_age"?t="Umur Invoice":n=="bill_date"?t="Tanggal Pembayaran Terakhir":n=="total"?t="Total":n=="total_all_ppn"?t="Pajak":n=="paid_off"?t="Uang Muka atau Diskon":n=="signature_name"?t="Tanda Tangan":n=="payment_metode"?t="Metode Pembayaran":n=="xendit_link"?t="Link Xendit":n=="code"?t="Kode":n=="rest_of_bill"?t="Sisa Tagihan":n=="products"?t="List Produk":n=="money"?t="Uang Terbilang":n=="partner_name"?t="Lembaga":n=="nominal"?t="Nominal":n=="payment_for"&&(t="Pembayaran Untuk"),t};return Ne?e.jsx(da,{auth:k}):e.jsx(ga,{blocked:Se,template:ba,children:e.jsxs(ra,{auth:k.user,children:[e.jsx(ta,{ref:E}),e.jsx(oa,{}),e.jsx(ca,{header:"Filter",visible:ve,className:"w-full md:w-[30%] px-3 dark:glass dark:text-white",position:"right",onHide:()=>I(!1),children:e.jsxs("form",{onSubmit:Ye,children:[e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"name",children:"Berdasarkan penginput"}),e.jsx(g,{optionLabel:"name",dataKey:"id",value:m.user,onChange:a=>_("user",a.target.value),options:P,placeholder:"Pilih User",filter:!0,showClear:!0,valueTemplate:R,itemTemplate:z,className:"flex justify-center  dark:text-gray-400   "})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"status",children:"Status "}),e.jsx(g,{dataKey:"name",value:m.status,onChange:a=>{_("status",a.target.value)},options:he,optionLabel:"name",placeholder:"Pilih Status",className:"w-full md:w-14rem"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"metode",children:"Metode *"}),e.jsx(g,{value:m.payment_metode,onChange:a=>_("payment_metode",a.target.value),options:[{name:"Tunai"},{name:"Cazhbox"},{name:"Transfer Bank"}],optionLabel:"name",placeholder:"Pilih metode",className:"w-full md:w-14rem",editable:!0})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"",children:"Tanggal Input"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{value:m.input_date.start?new Date(m.input_date.start):null,style:{height:"35px"},onChange:a=>{_("input_date",{...m.input_date,start:a.target.value})},placeholder:"mulai",showIcon:!0,dateFormat:"dd/mm/yy"}),e.jsx("span",{children:"-"}),e.jsx(C,{value:m.input_date.end?new Date(m.input_date.end):null,style:{height:"35px"},onChange:a=>{_("input_date",{...m.input_date,end:a.target.value})},placeholder:"selesai",showIcon:!0,dateFormat:"dd/mm/yy"})]})]}),e.jsxs("div",{className:"flex flex-row mt-5",children:[e.jsx(c,{ref:q,label:"Terapkan",className:"bg-purple-600 text-sm shadow-md rounded-lg mr-2"}),e.jsx(c,{type:"button",label:"Reset",onClick:a=>{Pe(),setTimeout(()=>{q.current.click()},500)},className:"outline-purple-600 outline-1 outline-dotted bg-transparent text-slate-700  text-sm shadow-md rounded-lg mr-2"})]})]})}),e.jsx(oe,{className:" shadow-md p-1 dark:bg-slate-800 dark:text-gray-300",ref:G,children:e.jsxs("div",{className:"flex flex-col flex-wrap w-full",children:[w.includes("edit invoice umum")&&e.jsx(c,{icon:"pi pi-pencil",label:"edit",className:"bg-transparent hover:bg-slate-200 w-full text-slate-500 border-b-2 border-slate-400",onClick:()=>{ea.get("/invoice_generals/"+X.uuid)}}),w.includes("hapus invoice umum")&&e.jsx(c,{icon:"pi pi-trash",label:"hapus",className:"bg-transparent hover:bg-slate-200 w-full text-slate-500 border-b-2 border-slate-400",onClick:()=>{Ve()}})]})}),e.jsx(na,{title:"Invoice Umum",children:w.includes("tambah invoice umum")&&e.jsx(e.Fragment,{children:e.jsxs(aa,{href:"/invoice_generals/create",className:"bg-purple-600 block text-white py-2 px-3 font-semibold text-sm shadow-md rounded-lg mr-2",children:[e.jsx("i",{className:"pi pi-plus",style:{fontSize:"0.7rem",paddingRight:"5px"}}),"Tambah"]})})}),e.jsxs(ma,{activeIndex:y,onTabChange:a=>{_e(a.index)},className:"mt-2",children:[e.jsx(B,{header:"Semua Invoice",children:y==0&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{}),e.jsx(ne,{group:"declarative",visible:we,onHide:()=>O(!1),message:"Konfirmasi kembali jika anda yakin!",header:"Konfirmasi kembali",icon:"pi pi-info-circle",accept:Ue}),e.jsx("div",{className:"flex mx-auto flex-col justify-center mt-5 gap-5",ref:L,children:e.jsx("div",{className:"card p-fluid w-full h-full flex justify-center rounded-lg",children:e.jsxs(U,{loading:ge,className:"w-full h-auto rounded-lg dark:glass border-none text-center shadow-md",pt:{bodyRow:"dark:bg-transparent  dark:text-gray-300",table:"dark:bg-transparent bg-white dark:text-gray-300"},paginator:!0,rowsPerPageOptions:[10,25,50,100],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} - {last} dari {totalRecords}",filters:W,rows:10,emptyMessage:"Invoice Umum tidak ditemukan.",paginatorClassName:"dark:bg-transparent paginator-custome dark:text-gray-300 rounded-b-lg",header:Ae,globalFilterFields:ee,scrollable:!0,value:K,dataKey:"id",expandedRows:Ce,onRowToggle:a=>{Te(a.data)},rowExpansionTemplate:Je,onRowExpand:We,editMode:"cell",children:[e.jsx(i,{align:"center",expander:$e,style:{width:"max-content",whiteSpace:"nowrap"},frozen:!0,headerClassName:"dark:border-none bg-white pl-6 dark:bg-slate-900 dark:text-gray-300"}),e.jsx(i,{header:"Aksi",body:Re,style:{width:"max-content",whiteSpace:"nowrap"},frozen:!0,align:"center",className:"dark:border-none bg-white",headerClassName:"dark:border-none bg-white dark:bg-slate-900 dark:text-gray-300"}),Z.map(a=>e.jsx(i,{field:a.field,header:a.header,body:a.body,style:a.style,frozen:a.frozen,editor:a.editor,align:"left",className:"dark:border-none bg-white",headerClassName:"dark:border-none bg-white dark:bg-slate-900 dark:text-gray-300"})),e.jsx(i,{field:"invoice_age",className:"dark:border-none",headerClassName:"dark:border-none  bg-transparent dark:bg-transparent dark:text-gray-300",align:"left",header:"Umur Invoice",body:a=>a.invoice_age+" hari",style:{width:"max-content",whiteSpace:"nowrap"}}),e.jsx(i,{field:"products",className:"dark:border-none",headerClassName:"dark:border-none  bg-transparent dark:bg-transparent dark:text-gray-300",align:"left",header:"Produk",body:a=>e.jsx(c,{label:"List",className:"p-0 underline bg-transparent text-blue-700 text-left",onClick:t=>{H.current.toggle(t),xe(o=>a.products)},"aria-controls":"popup_menu_right","aria-haspopup":!0}),style:{width:"max-content",whiteSpace:"nowrap"}})]})})})]})}),e.jsx(B,{header:"Log",children:y==1&&e.jsx(fa,{auth:k,fetchUrl:"/api/invoice_generals/logs",filterUrl:"/invoice_generals/logs/filter",deleteUrl:"/invoice_generals/logs",objectKeyToIndo:Qe,users:P,showSuccess:h,showError:f})}),e.jsx(B,{header:"Arsip",children:y==2&&e.jsx(xa,{auth:k,users:P,fetchUrl:"/api/invoice_generals/arsip",forceDeleteUrl:"/invoice_generals/{id}/force",restoreUrl:"/invoice_generals/{id}/restore",filterUrl:"/invoice_generals/arsip/filter",columns:Z,showSuccess:h,showError:f,globalFilterFields:ee})})]}),e.jsx(oe,{className:"w-[95%] shadow-md md:max-w-[50%] dark:bg-slate-900 dark:text-gray-300",ref:H,showCloseIcon:!0,children:e.jsxs(U,{value:fe,className:"my-4 overflow-x-auto w-full",emptyMessage:"Produk tidak ditemukan.",children:[e.jsx(i,{header:"No",body:(a,{rowIndex:t})=>t+1,style:{width:"max-content",whiteSpace:"nowrap"},className:"dark:border-none",headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"name",header:"Produk",style:{width:"max-content",whiteSpace:"nowrap"},headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"price",header:"Harga",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.price.toLocaleString("id-ID"),headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"quantity",header:"Kuantitas",style:{width:"max-content",whiteSpace:"nowrap"},headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"total",header:"Total Harga",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.total.toLocaleString("id-ID"),headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"ppn",header:"PPN (%)",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.ppn+"%",headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"}),e.jsx(i,{field:"total_ppn",header:"PPN",style:{width:"max-content",whiteSpace:"nowrap"},body:a=>a.total_ppn.toLocaleString("id-ID"),headerClassName:"dark:border-none bg-gray-50 dark:bg-transparent dark:text-gray-300"})]})}),e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(se,{header:"Input Pembayaran",headerClassName:"dark:glass shadow-md dark:text-white",className:"bg-white w-[80%] md:w-[60%] lg:w-[30%] dark:glass dark:text-white",contentClassName:" dark:glass dark:text-white",visible:be,onHide:()=>S(!1),children:e.jsxs("form",{onSubmit:a=>Q(a,"tambah"),children:[e.jsx("div",{className:"flex flex-col mt-3",children:e.jsxs("div",{className:"flex bg-purple-600 text-white text-xs p-3 rounded-lg justify-between w-full h-full",children:[e.jsx("p",{children:"Sisa tagihan"}),e.jsxs("p",{className:"font-semibold",children:["Rp"," ",r.rest_bill?r.rest_bill.toLocaleString("id-ID"):0]})]})}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"date",children:"Tanggal *"}),e.jsx(C,{value:r.date?new Date(r.date):null,style:{height:"35px"},onChange:a=>{s("date",a.target.value)},showIcon:!0,dateFormat:"dd-mm-yy",className:`w-full md:w-14rem ${J.date&&"p-invalid"}`})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"money",children:"Diterima Dari *"}),e.jsx(g,{value:r.partner,dataKey:"id",onChange:a=>{s("partner",{...r.partner,id:a.target.value.id,name:a.target.value.name})},options:A,optionLabel:"name",placeholder:"Pilih Lembaga",filter:!0,disabled:!0,valueTemplate:R,itemTemplate:z,className:"w-full md:w-14rem"})]}),e.jsxs("div",{className:"flex flex-col justify-around mt-3",children:[e.jsx("label",{htmlFor:"nominal",children:"Nominal *"}),e.jsx(ie,{value:r.nominal,onValueChange:a=>{Y(a.value)},defaultValue:0,className:"dark:bg-gray-300",id:"nominal","aria-describedby":"nominal-help",locale:"id-ID"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"money",children:"Uang Terbilang *"}),e.jsx(N,{value:r.money,onChange:a=>s("money",a.target.value),className:"dark:bg-gray-300",id:"money",required:!0,"aria-describedby":"money-help"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"payment_for",children:"Pembayaran Untuk *"}),e.jsx(N,{value:r.payment_for,onChange:a=>s("payment_for",a.target.value),className:"dark:bg-gray-300",id:"payment_for","aria-describedby":"payment_for-help"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"metode",children:"Metode *"}),e.jsx(g,{value:r.metode,onChange:a=>s("metode",a.target.value),options:[{name:"Tunai"},{name:"Cazhbox"},{name:"Transfer Bank"}],optionLabel:"name",placeholder:"Pilih metode",className:"w-full md:w-14rem",editable:!0})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"proof_of_transaction",children:"Bukti (foto)"}),e.jsx("div",{className:"App",children:r.proof_of_transaction!==null&&typeof r.proof_of_transaction=="string"?e.jsx(e.Fragment,{children:e.jsx(F,{files:r.proof_of_transaction,onaddfile:(a,t)=>{a||s("proof_of_transaction",t.file)},onremovefile:()=>{s("proof_of_transaction",null)},maxFileSize:"2mb",labelMaxFileSizeExceeded:"File terlalu besar",labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'})}):e.jsx(e.Fragment,{children:e.jsx(F,{onaddfile:(a,t)=>{a||s("proof_of_transaction",t.file)},onremovefile:()=>{s("proof_of_transaction",null)},maxFileSize:"2mb",labelMaxFileSizeExceeded:"File terlalu besar",labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'})})})]}),e.jsx("div",{className:"flex justify-center my-5",children:e.jsx(c,{label:"Submit",disabled:Le,className:"bg-purple-600 text-sm shadow-md rounded-lg"})})]})})}),e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(se,{header:"Edit Input Pembayaran",headerClassName:"dark:glass shadow-md dark:text-white",className:"bg-white w-[80%] md:w-[60%] lg:w-[30%] dark:glass dark:text-white",contentClassName:" dark:glass dark:text-white",visible:ye,onHide:()=>D(!1),children:e.jsxs("form",{onSubmit:a=>Q(a,"update"),children:[e.jsx("div",{className:"flex flex-col mt-3",children:e.jsxs("div",{className:"flex bg-purple-600 text-white text-xs p-3 rounded-lg justify-between w-full h-full",children:[e.jsx("p",{children:"Sisa tagihan"}),e.jsxs("p",{className:"font-semibold",children:["Rp"," ",r.rest_bill?r.rest_bill.toLocaleString("id-ID"):0]})]})}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"date",children:"Tanggal *"}),e.jsx(C,{value:r.date?new Date(r.date):null,style:{height:"35px"},onChange:a=>{s("date",a.target.value)},showIcon:!0,dateFormat:"dd-mm-yy",className:`w-full md:w-14rem ${J.date&&"p-invalid"}`})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"money",children:"Diterima Dari *"}),e.jsx(g,{value:r.partner,dataKey:"id",onChange:a=>{s("partner",{...r.partner,id:a.target.value.id,name:a.target.value.name})},options:A,optionLabel:"name",placeholder:"Pilih Lembaga",filter:!0,valueTemplate:R,itemTemplate:z,className:"w-full md:w-14rem"})]}),e.jsxs("div",{className:"flex flex-col justify-around mt-3",children:[e.jsx("label",{htmlFor:"nominal",children:"Nominal *"}),e.jsx(ie,{value:r.nominal,onValueChange:a=>{Y(a.value)},defaultValue:0,className:"dark:bg-gray-300",id:"nominal","aria-describedby":"nominal-help",locale:"id-ID"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"money",children:"Uang Terbilang *"}),e.jsx(N,{value:r.money,onChange:a=>s("money",a.target.value),className:"dark:bg-gray-300",id:"money","aria-describedby":"money-help"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"payment_for",children:"Pembayaran Untuk *"}),e.jsx(N,{value:r.payment_for,onChange:a=>s("payment_for",a.target.value),className:"dark:bg-gray-300",id:"payment_for","aria-describedby":"payment_for-help"})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"proof_of_transaction",children:"Bukti (foto)"}),e.jsx("div",{className:"App",children:r.proof_of_transaction!==null&&typeof r.proof_of_transaction=="string"?e.jsx(e.Fragment,{children:e.jsx(F,{files:r.proof_of_transaction,onaddfile:(a,t)=>{a||s("proof_of_transaction",t.file)},onremovefile:()=>{s("proof_of_transaction",null)},maxFileSize:"2mb",labelMaxFileSizeExceeded:"File terlalu besar",labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'})}):e.jsx(e.Fragment,{children:e.jsx(F,{onaddfile:(a,t)=>{a||s("proof_of_transaction",t.file)},onremovefile:()=>{s("proof_of_transaction",null)},maxFileSize:"2mb",labelMaxFileSizeExceeded:"File terlalu besar",labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'})})})]}),e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsx("label",{htmlFor:"metode",children:"Metode *"}),e.jsx(g,{value:r.metode,onChange:a=>s("metode",a.target.value),options:[{name:"Tunai"},{name:"Cazhbox"},{name:"Transfer Bank"}],optionLabel:"name",placeholder:"Pilih Status",className:"w-full md:w-14rem",editable:!0})]}),e.jsx("div",{className:"flex justify-center my-5",children:e.jsx(c,{label:"Submit",className:"bg-purple-600 text-sm shadow-md rounded-lg"})})]})})})]})})}export{xt as default};
